"""
–¢–µ—Å—Ç retry-–ª–æ–≥–∏–∫–∏ –¥–ª—è –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –±–∞–Ω–∫–æ–≤
"""
from processor import DocumentProcessor

# –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –±–∞–Ω–∫–∏ –∏–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ª–æ–≥–∞ (—Ç–µ —á—Ç–æ –¥–∞–≤–∞–ª–∏ —Å–ª—É—á–∞–π–Ω—ã–µ —Ä–µ–¥–∏—Ä–µ–∫—Ç—ã)
problem_banks = [
    "–û–û–û ¬´–ë–∞–Ω–∫ –ü—ç–π–¥–∂–∏–Ω¬ª",      # –†–µ–¥–∏—Ä–µ–∫—Ç–∏–ª –Ω–∞ "–¢–µ–ø–ª–æ–≥–∞–∑—Å—Ç—Ä–æ–π-–ü—Ä–æ–µ–∫—Ç"
    "–û–û–û ¬´–û–ó–û–ù –ë–∞–Ω–∫¬ª",         # –†–µ–¥–∏—Ä–µ–∫—Ç–∏–ª –Ω–∞ "–ù–ü–§ –¶–µ—Ä–∏—Ö", "–£–ö –¢–Æ–°"
    "–ê–û ¬´–Ø–Ω–¥–µ–∫—Å –ë–∞–Ω–∫¬ª",        # –†–µ–¥–∏—Ä–µ–∫—Ç–∏–ª –Ω–∞ "–í–∞—à–∞ –†–∞–±–æ—Ç–∞", "–ü–∏—Ç–ª"
    "–û–û–û ¬´–Æ–ú–∞–Ω–∏¬ª",             # –î–æ–ª–∂–µ–Ω –Ω–∞–π—Ç–∏—Å—å
]

print("=" * 80)
print("üîÑ –¢–ï–°–¢ RETRY-–õ–û–ì–ò–ö–ò –î–õ–Ø –ü–†–û–ë–õ–ï–ú–ù–´–• –ë–ê–ù–ö–û–í")
print("=" * 80)
print()
print("–ö–∞–∂–¥—ã–π –±–∞–Ω–∫ –±—É–¥–µ—Ç –∏—Å–∫–∞—Ç—å—Å—è –¥–æ 3 —Ä–∞–∑ —Å –Ω–æ–≤—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏")
print("–ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞")
print()

success_count = 0
failed_count = 0

for idx, bank_name in enumerate(problem_banks, 1):
    print("=" * 80)
    print(f"[{idx}/{len(problem_banks)}] {bank_name}")
    print("=" * 80)
    
    inn, address = DocumentProcessor.parse_inn_and_address_from_rusprofile(bank_name)
    
    print()
    if inn:
        print(f"‚úÖ –£–°–ü–ï–•:")
        print(f"   –ò–ù–ù: {inn}")
        print(f"   –ê–¥—Ä–µ—Å: {address[:70] + '...' if address and len(address) > 70 else address}")
        success_count += 1
    else:
        print(f"‚ùå –ù–ï –ù–ê–ô–î–ï–ù –ø–æ—Å–ª–µ –≤—Å–µ—Ö –ø–æ–ø—ã—Ç–æ–∫")
        failed_count += 1
    
    print()

print("=" * 80)
print("–°–¢–ê–¢–ò–°–¢–ò–ö–ê:")
print("=" * 80)
print(f"‚úÖ –ù–∞–π–¥–µ–Ω–æ: {success_count}/{len(problem_banks)}")
print(f"‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω–æ: {failed_count}/{len(problem_banks)}")
print()
print("üìù –í–´–í–û–î:")
print("–°–∏—Å—Ç–µ–º–∞ –¥–µ–ª–∞–µ—Ç –¥–æ 3 –ø–æ–ø—ã—Ç–æ–∫ —Å —Ä–∞–∑–Ω—ã–º–∏ User-Agent –∏ IP")
print("–ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞ –æ—Ç RusProfile")
