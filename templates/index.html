<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–∏—Å—Ç–µ–º–∞ —É—á–µ—Ç–∞ –¥–æ–ª–∂–Ω–∏–∫–æ–≤</title>
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="stylesheet" href="/static/css/style.css?v=5">
</head>
<body>
    <div class="container">
        <header>
            <div class="header-top">
                <h1>–°–∏—Å—Ç–µ–º–∞ —É—á–µ—Ç–∞ –¥–æ–ª–∂–Ω–∏–∫–æ–≤</h1>
                <button id="themeToggle" class="theme-toggle" title="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É" aria-label="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É">
                    <span class="theme-icon-light">‚òÄÔ∏è</span>
                    <span class="theme-icon-dark">üåô</span>
                </button>
            </div>
            <div id="queueStatus" class="queue-status" style="display: none;">
                <span class="queue-label">–û—á–µ—Ä–µ–¥—å –æ–±—Ä–∞–±–æ—Ç–∫–∏:</span>
                <span id="queueInfo" class="queue-info"></span>
            </div>

            <div id="notificationPermission" class="notification-permission" style="display: none;">
                <span>üîî</span>
                <span>–†–∞–∑—Ä–µ—à–∏—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∞—Ç—å –æ–ø–æ–≤–µ—â–µ–Ω–∏—è –æ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</span>
                <button id="enableNotificationsBtn" class="btn-enable-notifications">–†–∞–∑—Ä–µ—à–∏—Ç—å</button>
            </div>
        </header>

        <div class="search-controls">
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="–ü–æ–∏—Å–∫ –¥–æ–ª–∂–Ω–∏–∫–æ–≤ –ø–æ –§–ò–û..." />
                <svg class="search-icon" width="20" height="20" viewBox="0 0 20 20" fill="none">
                    <circle cx="9" cy="9" r="7" stroke="currentColor" stroke-width="2"/>
                    <path d="M14 14L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </div>
            <button class="btn-add" id="addDebtorBtn">
                <span>+</span> –î–æ–±–∞–≤–∏—Ç—å –¥–æ–ª–∂–Ω–∏–∫–∞
            </button>
        </div>

        <div class="table-container">
            <table id="debtorsTable">
                <thead>
                    <tr>
                        <th>–°—Ç–∞—Ç—É—Å</th>
                        <th>–§–ò–û</th>
                        <th>–ü–æ–¥–ø–∏—Å–∞–Ω—Ç</th>
                        <th>–î–∞—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è</th>
                        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                    </tr>
                </thead>
                <tbody id="debtorsTableBody">
                    <tr class="loading-row">
                        <td colspan="5">
                            <div class="loading-spinner"></div>
                            <p>–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</p>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div id="uploadModal" class="modal">
        <div class="modal-content">
            <span class="modal-close">&times;</span>
            <h2>–ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</h2>
            
            <div class="form-group" style="margin-bottom: 20px;">
                <label for="lawyerSelect" style="display: block; margin-bottom: 8px; font-weight: 500; color: #333;">–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥–ø–∏—Å–∞–Ω—Ç–∞:</label>
                <select id="lawyerSelect" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px; background: white;">
                    <option value="urist1">–ò–∑–æ—Å–∏–º–æ–≤ –ò–≤–∞–Ω –î–º–∏—Ç—Ä–∏–µ–≤–∏—á</option>
                    <option value="urist2">–ö–∞–Ω–¥–µ–µ–≤–∞ –û–ª–µ—Å—è –°–µ—Ä–≥–µ–µ–≤–Ω–∞</option>
                    <option value="urist3">–ü–µ—Ä–µ–ø–ª–µ—Ç—á–∏–∫–æ–≤ –†–æ–º–∞–Ω –ë–æ—Ä–∏—Å–æ–≤–∏—á</option>
                </select>
            </div>
            
            <div id="dropZone" class="drop-zone">
                <svg class="upload-icon" width="48" height="48" viewBox="0 0 24 24" fill="none">
                    <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <p>–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ PDF –¥–æ–∫—É–º–µ–Ω—Ç—ã —Å—é–¥–∞</p>
                <p class="drop-zone-hint">–∏–ª–∏</p>
                <button class="btn-browse" type="button" onclick="document.getElementById('fileInput').click()">–í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª—ã</button>
                <input type="file" id="fileInput" multiple accept=".pdf" style="display: none;">
            </div>

            <div id="fileList" class="file-list"></div>

            <div class="modal-actions">
                <button class="btn-cancel" id="cancelUploadBtn">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn-submit" id="submitUploadBtn" disabled>–î–æ–±–∞–≤–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <div id="debtorModal" class="modal">
        <div class="modal-content modal-wide">
            <span class="modal-close">&times;</span>
            <h2 id="debtorName">–ó–∞–≥—Ä—É–∑–∫–∞...</h2>
            
            <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–æ–ª–∂–Ω–∏–∫–µ -->
            <div class="debtor-info-section">
                <div class="section-header">
                    <h3>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–æ–ª–∂–Ω–∏–∫–µ</h3>
                    <span id="debtorLawyerInfo" style="margin-left: auto; margin-right: 15px; color: #666; font-size: 14px;"></span>
                    <button class="btn-edit" id="editDebtorDataBtn" onclick="toggleEditMode()">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                </div>
                <div id="debtorDataContainer" class="debtor-data-grid">
                    <div class="loading-spinner"></div>
                </div>
                <div id="debtorDataActions" class="debtor-data-actions" style="display: none;">
                    <button class="btn-save" onclick="saveDebtorData()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    <button class="btn-cancel" onclick="cancelEditMode()">–û—Ç–º–µ–Ω–∞</button>
                </div>
            </div>
            
            <div class="documents-grid">
                <div class="doc-section">
                    <h3>–ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã</h3>
                    <div id="uploadedDocs" class="doc-list">
                        <div class="loading-spinner"></div>
                    </div>
                </div>
                
                <div class="doc-section">
                    <h3>–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã</h3>
                    <div id="generatedDocs" class="doc-list">
                        <div class="loading-spinner"></div>
                    </div>
                    <button class="btn-regenerate" id="regenerateDocsBtn" onclick="regenerateDocuments()" style="display: none;">
                        –ü–µ—Ä–µ–∑–∞–ø–æ–ª–Ω–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã
                    </button>
                </div>
            </div>

            <div class="modal-actions">
                <button class="btn-delete" id="deleteDebtorBtn">–£–¥–∞–ª–∏—Ç—å –¥–æ–ª–∂–Ω–∏–∫–∞</button>
                <button class="btn-cancel">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>

    <div id="dealsModal" class="modal">
        <div class="modal-content modal-wide">
            <span class="modal-close">&times;</span>
            <h2>–°–¥–µ–ª–∫–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 3 –≥–æ–¥–∞</h2>
            <p id="dealsDebtorName" style="color: #666; margin-bottom: 20px;"></p>
            
            <div id="dealsList" class="deals-list">
                <div class="loading-spinner"></div>
            </div>

            <div class="modal-actions">
                <button class="btn-cancel">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è -->
    <div id="confirmModal" class="modal">
        <div class="modal-content modal-confirm">
            <h3 id="confirmTitle">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ</h3>
            <p id="confirmMessage">–í—ã —É–≤–µ—Ä–µ–Ω—ã?</p>
            <div class="modal-actions">
                <button class="btn-confirm" id="confirmYesBtn">–î–∞</button>
                <button class="btn-cancel" id="confirmNoBtn">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <script src="/static/js/app.js"></script>
</body>
</html>
